<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">

<title>Introduction to APIs</title>

<meta name="description" content="">


<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


<!-- For syntax highlighting -->
<link rel="stylesheet" href="lib/css/zenburn.css">
<link rel="stylesheet" href="lib/css/prism.css">

<link rel="stylesheet" href="css/reveal.css">
<link rel="stylesheet" href="css/theme/ga-title.css" id="theme">


<!-- If the query includes 'print-pdf', use the PDF print sheet -->
<script>
  document.write( '<link rel="stylesheet" href="css/print/' +
    ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) +
    '.css" type="text/css" media="print">' );
</script>

<!--[if lt IE 9]>
<script src="lib/js/html5shiv.js"></script>
<![endif]-->

<link rel="stylesheet" type="text/css" href="https://nagale.com/proxima-nova/fonts.css" />

</head>

<body class="language-python">

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">


<!--
title: Modules and Libraries
type: lesson
duration: "00:45"
-->
<section id="introduction-to-apis" class="level2">
<h2><img src="https://ga-dash.s3.amazonaws.com/production/assets/logo-9f88ae6c9c3871690e33280fcf557f33.png" /> Introduction to APIs</h2>
<!--

## Overview
This lesson walks through the idea of APIs, starting with what they are. It touches on JSON vs XML, then has a series of exercises introducing keys and parameters.

## Learning Objectives
In this lesson, students will:

- Describe what an API is and why we might use one.
- Identify common APIs on the web.
- Call an API.



## Duration
45 minutes.

#### Timing Notes:
This is the last lesson of the last unit of the core Python material; after this is the unit lab. The slides as laid out here are quite short, designed to allow a lot of flex time for you to add exercises on any topics the students have struggled with (of note, hw-10wk-9 has much more API practice).

Here, address any remaining questions in the parking lot.


## Suggested Agenda

| Time | Activity |
| --- | --- |
| 0:00 - 0:03 | Welcome |
| 0:03 - 0:10 | API Overview |
| 0:11 - 0:42 | Calling APIs |
| 0:42 - 0:45 | Summary |

## Differentiation and Extensions
- For more advanced students, have them call other APIs (refer back to the  early  slide with the list)  and print out the  information  for that, legibly.
- Have them look through the OpenWeather API and print out even more information.
- Fill extra time by chaining together exercises on everything they've learned.

## In Class: Materials
- Projector
- Internet connection
- Python3
-->
<hr />
</section>
<section id="lesson-objectives" class="level2">
<h2>Lesson Objectives</h2>
<p><em>After this lesson, you will be able to...</em></p>
<ul>
<li>Describe what an API is and why we might use one.</li>
<li>Identify common APIs on the web.</li>
<li>Call an API.</li>
</ul>
<hr />
</section>
<section id="discussion-web-magic" class="level2">
<h2>Discussion: Web Magic</h2>
<p>Have you seen...</p>
<ul>
<li>A website with Google Maps on the page (like Yelp?).</li>
<li>A program that had live stock info?</li>
<li>A website that isn't Twitter but shows a live Twitter feed?</li>
<li>Any app that pulls info from somewhere else?</li>
</ul>
<p>How did they do this?</p>
<figure>
<img src="http://twimgs.com/ddj/images/article/2014/0314/GoogleMap_adrian.gif" />
</figure>
<aside class="notes">
<p><strong>Talking Points</strong>:</p>
<ul>
<li>Give examples here, like....</li>
<li>&quot;Have you seen a website that had a Google Map on it (like Yelp)? They probably didn't build that map themselves. What if you want a Google map embedded in your web app to show people where they can visit you? You aren't going to make that map yourself, so somehow you have to call Google. Well, Google has a way you can get the map information - all you have to do is send a request to the URL that Google provides, and Google gives you a google map back that you can use.&quot;</li>
</ul>
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>Get students discussing.</li>
<li>Terminology note! Google maps is <em>embedded</em> on the page.</li>
</ul>
</aside>
<hr />
</section>
<section id="apis-application-program-interfaces" class="level2">
<h2>APIs (Application Program Interfaces)</h2>
<p>An API is a service that provides raw data for public use.</p>
<p>APIs give us data, maps, anything!</p>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="header">
<th>What's the API?</th>
<th>Sample URL - Put this in a new tab!</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><a href="http://swapi.co/api/people/3" target="_blank">The Star Wars API: request R2-D2 info</a></strong></td>
<td>http://swapi.co/api/people/3</td>
</tr>
<tr class="even">
<td><strong><a href="http://dev.markitondemand.com/Api/Quote/xml?symbol=AAPL" target="_blank">Markit Digital's API: request current Apple stock info</a></strong></td>
<td>http://dev.markitondemand.com/Api/Quote/xml?symbol=AAPL</td>
</tr>
<tr class="odd">
<td><strong><a href="https://samples.openweathermap.org/data/2.5/weather?q=London,uk&appid=b6907d289e10d714a6e88b30761fae22" target="_blank">Open Weather Map: the Current Weather in London</a></strong></td>
<td>https://samples.openweathermap.org/data/2.5/weather?q=London,uk&amp;appid=b6907d289e10d714a6e88b30761fae22</td>
</tr>
</tbody>
</table>
<p>Do you think you've been on websites that call an API?</p>
<blockquote>
<p>Does the JSON look unreadable in the browser? If you're using Chrome, install the <a href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=en">JSON View plugin</a>.</p>
</blockquote>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>Open each of these URLs in a new window so students can see what happens when you call an API.</li>
<li>Encourage a discussion if students can think of other APIs.</li>
</ul>
<p><strong>Talking Points</strong>:</p>
<ul>
<li>&quot;Basically, an API is a service that provides raw data for public use. As third-party software developers, we can access an organization's API and use their data within our own applications. the term now commonly refers to web URLs that can be accessed for raw data.&quot;</li>
<li>&quot;Why recreate data when we don't have to? Think about past projects or ideas that would be easier if you could pull in data already gathered elsewhere.&quot;</li>
<li>&quot;APIs can provide us with data that would we would otherwise not be able to create ourselves.&quot;</li>
<li>&quot;There are a variety of APIs available on the internet. To call an API, send a request to a URL, and that API will return data to your program. You can pull data from anywhere that offers an API.&quot;</li>
<li>&quot;You can make this request as specific as you'd like - each web app out there offers different options for their API. You just have to find out from them what you can request!&quot;</li>
<li>&quot;Here are just a few examples of APIs that you can use. Check it out - the left column is the common name you might know. The right column is the URL you, in your program, would send a request to. You can click those URLs to see what each call would return.&quot;</li>
</ul>
</aside>
<hr />
</section>
<section id="how-do-we-use-an-api" class="level2">
<h2>How Do We Use an API?</h2>
<p>We'll use the <code>requests</code> module.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> requests

<span class="co"># Call the API by opening the url and reading the data.</span>
<span class="co"># We use the `get` function in `requests`.</span>
response <span class="op">=</span> requests.get(<span class="st">&quot;&lt;API URL HERE&gt;&quot;</span>)

<span class="bu">print</span>(response)
<span class="co"># Prints out the requested information!</span></code></pre></div>
<p>This works, but there's one very helpful line missing!</p>
<p>Before we see this in action, let's look at what the API might return.</p>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>Go down the code here - be sure they understand the idea.</li>
</ul>
<p><strong>Talking Points</strong>:</p>
<ul>
<li>&quot;We're going to demo this and write this code soon! But first, we need to see what the API might give us back.&quot;</li>
</ul>
</aside>
<hr />
</section>
<section id="json-vs-xml" class="level2">
<h2>JSON vs XML</h2>
<p>Imagine: You write code for a list.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">my_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>]
my_list.append(<span class="bu">len</span>(my_list))
my_list[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&quot;new element!&quot;</span>

<span class="cf">for</span> item <span class="kw">in</span> my_list:
  <span class="bu">print</span> item</code></pre></div>
<p>But then, <code>my_list</code> is unexpectedly a dictionary - or an int - or even a class! The code we wrote won't work.</p>
<p>APIs can give data back in two ways - JSON or XML. Depending on what the API does, we need to write our program a different way.</p>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>Go down the code here - be sure they understand the idea.</li>
</ul>
<p><strong>Talking Points</strong>:</p>
<ul>
<li>&quot;We're going to demo this and write this code soon! But first, we need to see what the API might give us back.&quot;</li>
</ul>
</aside>
<hr />
</section>
<section id="how-do-apis-give-us-info-option-1-json" class="level2">
<h2>How Do APIs Give Us Info? Option 1: JSON</h2>
<p>Here's a potential return from an API:</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;users&quot;</span><span class="fu">:</span> <span class="ot">[</span>
    <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Wonder Woman&quot;</span><span class="fu">,</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">}</span><span class="ot">,</span>
    <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Black Panther&quot;</span><span class="fu">,</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">}</span><span class="ot">,</span>
    <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Batgirl&quot;</span><span class="fu">,</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">}</span>
  <span class="ot">]</span>
<span class="fu">}</span></code></pre></div>
<p>Looks like a dictionary with a list of dictionaries inside it, right?</p>
<p>But it's not a dictionary! It's <strong>JSON</strong> (&quot;JavaScript Object Notation&quot;).</p>
<p>The <code>requests</code> module has a <a href="http://docs.python-requests.org/en/master/user/quickstart/#json-response-content">built-in json decoder</a> to turn JSON into a Python dictionary.</p>
<p>We can <strong>decode</strong> JSON with <code>decoded_data = response_from_request.json()</code>.</p>
<aside class="notes">
<p><strong>Talking Points</strong>:</p>
<ul>
<li>&quot;So, APIs are great... What does it look like?&quot;</li>
<li>&quot;<strong>JSON</strong> stands for &quot;JavaScript Object Notation&quot; and has become a universal standard for serializing native data structures for transmission. It is light-weight, easy to read and quick to parse. JSON looks like this - it's easily readable and information is separated with braces {} and commas.&quot;</li>
</ul>
</aside>
<hr />
</section>
<section id="how-do-apis-give-us-info-option-2-xml" class="level2">
<h2>How Do APIs Give Us Info? Option 2: XML</h2>
<p>Instead of JSON, we might get XML:</p>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;users&gt;</span>
  <span class="kw">&lt;user</span><span class="ot"> id=</span><span class="st">&quot;0&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;name&gt;</span>Wonder Woman<span class="kw">&lt;/name&gt;</span>
  <span class="kw">&lt;/user&gt;</span>
  <span class="kw">&lt;user</span><span class="ot"> id=</span><span class="st">&quot;1&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;name&gt;</span>Black Panther<span class="kw">&lt;/name&gt;</span>
  <span class="kw">&lt;/user&gt;</span>
  <span class="kw">&lt;user</span><span class="ot"> id=</span><span class="st">&quot;2&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;name&gt;</span>Batgirl<span class="kw">&lt;/name&gt;</span>
  <span class="kw">&lt;/user&gt;</span>
<span class="kw">&lt;/users&gt;</span></code></pre></div>
<p>JSON's certainly easier to read!</p>
<ul>
<li>We'll stick with JSON whenever we can!</li>
</ul>
<blockquote>
<p><strong>Protip</strong>: Most of you don't need to know about XML, but if you're working with legacy code or an older API, you may have to use XML. In that case, look up <a href="https://python.readthedocs.io/en/stable/library/xml.etree.elementtree.html">Element Tree XML</a>.</p>
</blockquote>
<aside class="notes">
<p><strong>Talking Points</strong>: &quot;<strong>XML</strong> stands for &quot;eXtensible Markup Language&quot; and is the granddaddy of serialized data formats (itself based on HTML). XML is fat, ugly and cumbersome to parse. It remains a major format, however, due to its legacy usage across the web.&quot;</p>
<p>&quot;Conveniently, many APIs publish data in multiple formats and let you specify which you'd like. For example, <code>https:///api/index.php?output=json</code> or <code>https:///api/index.php?output=xml</code>&quot;</p>
<p>&quot;We'll be using JSON.&quot;</p>
</aside>
<hr />
</section>
<section id="lets-choose-an-api" class="level2">
<h2>Let's Choose an API</h2>
<p><strong>To Recap</strong>: APIs give us data we can use in either XML or JSON.</p>
<p>Let's call one!</p>
<p>Check out <a href="http://api.open-notify.org/astros.json" target="_blank">http://api.open-notify.org/astros.json</a>,_ which tells us the people currently on the ISS.</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
    <span class="dt">&quot;number&quot;</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span>
    <span class="dt">&quot;people&quot;</span><span class="fu">:</span> <span class="ot">[</span>
        <span class="fu">{</span><span class="dt">&quot;craft&quot;</span><span class="fu">:</span> <span class="st">&quot;ISS&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Oleg Novitskiy&quot;</span><span class="fu">}</span><span class="ot">,</span>
        <span class="fu">{</span><span class="dt">&quot;craft&quot;</span><span class="fu">:</span> <span class="st">&quot;ISS&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Thomas Pesquet&quot;</span><span class="fu">}</span><span class="ot">,</span>
        <span class="fu">{</span><span class="dt">&quot;craft&quot;</span><span class="fu">:</span> <span class="st">&quot;ISS&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Peggy Whitson&quot;</span><span class="fu">}</span><span class="ot">,</span>
        <span class="fu">{</span><span class="dt">&quot;craft&quot;</span><span class="fu">:</span> <span class="st">&quot;ISS&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Fyodor Yurchikhin&quot;</span><span class="fu">}</span><span class="ot">,</span>
        <span class="fu">{</span><span class="dt">&quot;craft&quot;</span><span class="fu">:</span> <span class="st">&quot;ISS&quot;</span><span class="fu">,</span> <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Jack Fischer&quot;</span><span class="fu">}</span>
        <span class="ot">]</span><span class="fu">,</span>
        <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;success&quot;</span>
<span class="fu">}</span></code></pre></div>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>The number of astronauts and names currently aboard the International Space Station (ISS).</li>
<li>Go to the website in the browser so that they can see what it returns.</li>
<li>Ask if it's JSON or XML to check their memory.</li>
</ul>
</aside>
<hr />
</section>
<section id="calling-an-api" class="level2">
<h2>Calling an API</h2>
<ul>
<li>Import the <code>request</code> module</li>
<li>Call the API (<code>requests.get()</code>)</li>
<li>Parse the response with <code>response.json()</code></li>
</ul>
<iframe height="400px" width="100%" src="https://repl.it/@SuperTernary/python-programming-apis-iss?lite=true" scrolling="no" frameborder="no" allowtransparency="true" allowfullscreen="true" sandbox="allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals">
</iframe>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li><p>Go down this code line by line. Why do we import these modules? What does each line do? Where does .read and .loads come from?</p></li>
<li><p>Terminology: parse.</p></li>
</ul>
<p><strong>Repl.it Note</strong>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># Call the API by opening the url and reading the data.</span>
response <span class="op">=</span> requests.get(<span class="st">&quot;http://api.open-notify.org/astros.json&quot;</span>)

<span class="co"># Decode the raw JSON data</span>
response_data <span class="op">=</span> response.json()

<span class="bu">print</span>(response_data)</code></pre></div>
</aside>
<hr />
</section>
<section id="you-do-calling-an-api" class="level2">
<h2>You Do: Calling an API</h2>
<p>Open a new file, <code>api-practice.py</code>. Type and run the code:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> requests

<span class="co"># Call the API by opening the url and reading the data.</span>
response <span class="op">=</span> requests.get(<span class="st">&quot;http://api.open-notify.org/astros.json&quot;</span>)

<span class="co"># Decode the raw JSON data</span>
response_data <span class="op">=</span> response.json()

<span class="bu">print</span>(response_data)</code></pre></div>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>It's the same code to get them used to typing it with an expected output. Discourage copying anything but the URL.</li>
<li>Walk around to be sure everyone can do it.</li>
</ul>
</aside>
<hr />
</section>
<section id="we-do-a-new-api" class="level2">
<h2>We Do: A New API</h2>
<p>Awesome! Go back to your file. Let's instead call this URL:</p>
<p><code>http://dev.markitondemand.com/Api/Quote/xml?symbol=AAPL</code></p>
<p>Why does it break? We can't parse XML like JSON.</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;QuoteApiModel&gt;</span>
  <span class="kw">&lt;Data&gt;</span>
    <span class="kw">&lt;Status&gt;</span>SUCCESS<span class="kw">&lt;/Status&gt;</span>
    <span class="kw">&lt;Name&gt;</span>Apple Inc<span class="kw">&lt;/Name&gt;</span>
    <span class="kw">&lt;Symbol&gt;</span>AAPL<span class="kw">&lt;/Symbol&gt;</span>
    <span class="kw">&lt;LastPrice&gt;</span>185.5<span class="kw">&lt;/LastPrice&gt;</span>
    <span class="kw">&lt;Change&gt;</span>1.34<span class="kw">&lt;/Change&gt;</span>
    <span class="kw">&lt;ChangePercent&gt;</span>0.7276281494<span class="kw">&lt;/ChangePercent&gt;</span>
    <span class="kw">&lt;Timestamp&gt;</span>Thu Jun 28 00:00:00 UTC-04:00 2018<span class="kw">&lt;/Timestamp&gt;</span>
    <span class="kw">&lt;MarketCap&gt;</span>911758099000<span class="kw">&lt;/MarketCap&gt;</span>
    <span class="kw">&lt;Volume&gt;</span>17365235<span class="kw">&lt;/Volume&gt;</span>
    <span class="kw">&lt;ChangeYTD&gt;</span>169.23<span class="kw">&lt;/ChangeYTD&gt;</span>
    <span class="kw">&lt;ChangePercentYTD&gt;</span>9.6141346097<span class="kw">&lt;/ChangePercentYTD&gt;</span>
    <span class="kw">&lt;High&gt;</span>186.21<span class="kw">&lt;/High&gt;</span>
    <span class="kw">&lt;Low&gt;</span>183.8<span class="kw">&lt;/Low&gt;</span>
    <span class="kw">&lt;Open&gt;</span>184.1<span class="kw">&lt;/Open&gt;</span>
  <span class="kw">&lt;/Data&gt;</span>
<span class="kw">&lt;/QuoteApiModel&gt;</span></code></pre></div>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>Do this with them!</li>
<li>This is just a quick aside - the next slide is back to JSON.</li>
</ul>
<p><strong>Talking Points</strong>:</p>
<ul>
<li>&quot;XML is out of the scope of our class - but if your API errors, check that you're correctly parsing XML or JSON. We'll go back to JSON, now.&quot;</li>
</ul>
</aside>
<hr />
</section>
<section id="quick-review" class="level2">
<h2>Quick Review</h2>
<p>We've called an API! Great job. We did this with the <code>get</code> function in the <code>requests</code> module. APIs are made available by other websites or applications. They give us data we can use in either XML or JSON.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> requests
response <span class="op">=</span> requests.get(<span class="st">&quot;http://api.open-notify.org/astros.json&quot;</span>)
response_data <span class="op">=</span> response.json()
<span class="bu">print</span>(response_data)</code></pre></div>
<p>JSON:</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;users&quot;</span><span class="fu">:</span> <span class="ot">[</span>
    <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Wonder Woman&quot;</span><span class="fu">,</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">}</span><span class="ot">,</span>
    <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Black Panther&quot;</span><span class="fu">,</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">}</span>
  <span class="ot">]</span>
<span class="fu">}</span></code></pre></div>
<p>XML:</p>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;users&gt;</span>
  <span class="kw">&lt;user</span><span class="ot"> id=</span><span class="st">&quot;0&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;name&gt;</span>Wonder Woman<span class="kw">&lt;/name&gt;</span>
  <span class="kw">&lt;/user&gt;</span>
  <span class="kw">&lt;user</span><span class="ot"> id=</span><span class="st">&quot;1&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;name&gt;</span>Black Panther<span class="kw">&lt;/name&gt;</span>
  <span class="kw">&lt;/user&gt;</span>
<span class="kw">&lt;/users&gt;</span></code></pre></div>
<hr />
</section>
<section id="you-do-back-to-json" class="level2">
<h2>You Do: Back to JSON</h2>
<p>Back in your file, change the API call back to <code>http://api.open-notify.org/astros.json</code>.</p>
<p>Once it's decoded, it's a dictionary!</p>
<p>Replace your <code>print</code> statement:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> key, value <span class="kw">in</span> response_data.items():
    <span class="bu">print</span>(<span class="st">&quot;Key:&quot;</span>, key, <span class="st">&quot;Value:&quot;</span>, value, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre></div>
<p>Can we go further? Try to only print the <code>name</code>s of the astronauts.</p>
<aside class="notes">
<p>5 min</p>
<p>Teaching tip:</p>
<ul>
<li>Walk through printing the original output again, but give them a few minutes to try and print only the names before the answer on the next slide.</li>
</ul>
</aside>
<hr />
</section>
<section id="name-printing-solution" class="level2">
<h2>Name Printing: Solution</h2>
<p>Working backward, we have a:</p>
<ul>
<li>Dictionary (Key: <code>name</code>)</li>
<li>Which is inside a list (the value of <code>people</code>)</li>
<li>Which is inside a dictionary (Key: <code>people</code>)</li>
</ul>
<pre><code>For message the value is success

For people the value is [{&#39;craft&#39;: &#39;ISS&#39;, &#39;name&#39;: &#39;Oleg Artemyev&#39;}, {&#39;craft&#39;: &#39;ISS&#39;, &#39;name&#39;: &#39;Andrew Feustel&#39;}, .....]

For number the value is 6</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> item <span class="kw">in</span> response_data[<span class="st">&quot;people&quot;</span>]:
    <span class="bu">print</span>(item[<span class="st">&quot;name&quot;</span>])</code></pre></div>
<aside class="notes">
<p>Teaching tip:</p>
<ul>
<li>Walk through this with them.</li>
<li>Show the code!</li>
</ul>
</aside>
<hr />
</section>
<section id="you-do-shakespeare" class="level2">
<h2>You Do: Shakespeare</h2>
<p>In your file, call the Shakespeare API: <code>http://ShakeItSpeare.com/api/poem</code></p>
<p>Print only the poem.</p>
<aside class="notes">
<p>3 min</p>
<p>Teaching tip:</p>
<ul>
<li>Give them a few minutes to try and print only the poem before the answer on the next slide.</li>
</ul>
</aside>
<hr />
</section>
<section id="shakespeare-solution" class="level2">
<h2>Shakespeare: Solution</h2>
<p>Print only the poem.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> requests

<span class="co"># Call the API by opening the url and reading the data.</span>
response <span class="op">=</span> requests.get(<span class="st">&quot;http://ShakeItSpeare.com/api/poem&quot;</span>)

<span class="co"># Decode the raw JSON data</span>
response_data <span class="op">=</span> response.json()

<span class="bu">print</span>(response_data[<span class="st">&quot;poem&quot;</span>])</code></pre></div>
<aside class="notes">
<p>Teaching tip:</p>
<ul>
<li>Walk through this with them.</li>
<li>Show the code!</li>
</ul>
</aside>
<hr />
</section>
<section id="quick-review-1" class="level2">
<h2>Quick Review</h2>
<p>When we convert JSON, it keeps the same format, just in a Python structure.</p>
<p>When parsing an API's return, look through the JSON to find the exact structure you need - the string value from the <code>poem</code> key? Or the value from each <code>name</code> key in a list of dictionaries, which is the value of the <code>people</code> key?</p>
<p>Think it through before writing your code.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># From the ISS API:</span>
{  <span class="co"># The outer dictionary</span>
    <span class="st">&quot;number&quot;</span>: <span class="dv">5</span>,  <span class="co"># Key: Value</span>
    <span class="st">&quot;people&quot;</span>: [  <span class="co"># Key and value, again. Here, the value is a list of dictionaries.</span>
        {<span class="st">&quot;craft&quot;</span>: <span class="st">&quot;ISS&quot;</span>, <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Oleg Novitskiy&quot;</span>},
        {<span class="st">&quot;craft&quot;</span>: <span class="st">&quot;ISS&quot;</span>, <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Thomas Pesquet&quot;</span>},
        {<span class="st">&quot;craft&quot;</span>: <span class="st">&quot;ISS&quot;</span>, <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Peggy Whitson&quot;</span>},
        {<span class="st">&quot;craft&quot;</span>: <span class="st">&quot;ISS&quot;</span>, <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Fyodor Yurchikhin&quot;</span>},
        {<span class="st">&quot;craft&quot;</span>: <span class="st">&quot;ISS&quot;</span>, <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Jack Fischer&quot;</span>}
        ],
        <span class="st">&quot;message&quot;</span>: <span class="st">&quot;success&quot;</span>   <span class="co"># Key and value.</span>
}

<span class="co"># From the Shakespeare API</span>

{ <span class="co"># The outer dictionary</span>
  <span class="co"># The first key: value is the poem</span>
  <span class="st">&#39;poem&#39;</span>: <span class="st">&#39;Pardoned!</span><span class="ch">\n</span><span class="st">Nurs.</span><span class="ch">\n</span><span class="st">Bepaint my cheek?&#39;</span>,
  <span class="st">&#39;markov&#39;</span>: <span class="dv">2</span>,  <span class="co"># The second key: value pair</span>
  <span class="st">&#39;lines&#39;</span>: <span class="dv">3</span>  <span class="co"># The third key: value pair. This is the number of lines in the poem</span>
}</code></pre></div>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>Do a quick check for understanding.</li>
</ul>
</aside>
<hr />
</section>
<section id="i-do-api-authentication" class="level2">
<h2>I Do: API Authentication</h2>
<p>Many APIs are free but require a <strong>key</strong>. This identifies the developer requesting access.</p>
<p>If we call the Giphy API:</p>
<ul>
<li>With no key: <code>http://api.giphy.com/v1/gifs/search?q=funny+cat</code>
<ul>
<li><code>Error - Unauthorized</code>!</li>
</ul></li>
<li>With a key: <code>http://api.giphy.com/v1/gifs/search?q=funny+cat&amp;api_key=dc6zaTOxFJmzC</code>
<ul>
<li>Works!</li>
</ul></li>
</ul>
<p>Syntax Notes:</p>
<ul>
<li>The main API URL is <code>http://api.giphy.com/v1/gifs/search</code>.</li>
<li><code>?</code> always marks delineates a URL and its parameters.
<ul>
<li>(The <code>?</code> is a standard for every URL! Searching Google for &quot;banana&quot;, with <code>q</code> short for &quot;query&quot;: <code>https://www.google.com/search?q=banana</code>)</li>
<li>(Here's another one! Searching Amazon for &quot;banana&quot;: <code>https://www.amazon.com/s?field-keywords=banana</code>)</li>
</ul></li>
</ul>
<p><strong>Importantly</strong>, never publish your key! (This is an example)</p>
<aside class="notes">
<p><strong>Teaching Tips</strong>:</p>
<ul>
<li>Syntax is called out here for the first time. Continue calling it out throughout the rest of the lesson. Stress that every API has different parameters - read the docs!</li>
<li>Show this in a browser!</li>
</ul>
<p><strong>Talking Points</strong>:</p>
<ul>
<li>&quot;While the majority of APIs are free to use, many of them require an API &quot;key&quot; that identifies the developer requesting data access.&quot;</li>
<li>&quot;This is done to regulate usage and prevent abuse. Some APIs also rate-limit developers, meaning they have caps on the free data allowed during a given time period.&quot;</li>
<li>Some APIs, such as Spotify's music catalog, might seem like they should be available for anyone to access, but imagine if PayPal had an API that shops could request your money from.</li>
<li>Now imagine Etsy calls PayPal when you buy something. You'd want Etsy to have to prove it was actually Etsy, right? You don't want anyone to be able to pretend to be Etsy, go to PayPal, and charge you $500. Instead, you'd want Etsy to somehow authenticate to PayPal.</li>
<li>This is accomplished by giving Etsy a private key to use at PayPal that only Etsy knows. Every time Etsy makes a request to PayPal, Etsy can say, &quot;Hey, I'm requesting this. Here is my proof that I'm allowed to do so.&quot;</li>
<li>&quot;When you are calling APIs that require a key, it's up to you to store those keys somewhere private. They are the only proof that you are you and you are allowed to call that API, after all.&quot;</li>
</ul>
</aside>
<hr />
</section>
<section id="you-do-openweather-api" class="level2">
<h2>You Do: OpenWeather API</h2>
<p>Read about the API <a href="https://openweathermap.org/current" target="_blank">here</a>._</p>
<p>Use this key: <code>&amp;appid=052f26926ae9784c2d677ca7bc5dec98</code></p>
<p>Call this URL: <code>http://api.openweathermap.org/data/2.5/weather?zip=&lt;ZIP_CODE_HERE&gt;,us&amp;appid=052f26926ae9784c2d677ca7bc5dec98</code></p>
<p>Note the parameters:</p>
<ul>
<li><code>zip=&lt;ZIP_CODE_HERE&gt;</code></li>
<li><code>appid=&lt;KEY HERE&gt;</code></li>
</ul>
<p>Enter any zip code you choose (e.g. <code>60614</code>).</p>
<ul>
<li>Display the current temperature, the high and low temperate, the current weather description, and the name of the city that came back from the API.</li>
</ul>
<p><strong>Bonus:</strong> Print the temperature in both Fahrenheit and Celsius.</p>
<aside class="notes">
<p>5-10 min</p>
<p>Teaching Tip:</p>
<ul>
<li>Give students five or ten minutes - encourage them to look through the documentation. If students look lost, run this as a we do and open the documentation with them. It's not a quiz - it's just to get their brains thinking.</li>
</ul>
</aside>
<hr />
</section>
<section id="summary" class="level2">
<h2>Summary</h2>
<p>APIs:</p>
<ul>
<li>Handy URLs we can get info from.</li>
<li>Sometimes require keys.</li>
<li>Usually free.</li>
<li>Call with the <code>requests()</code> module.</li>
</ul>
<p>XML and JSON:</p>
<ul>
<li>Two formats APIs might return info to us in.</li>
<li>XML is legacy.</li>
<li>JSON looks like a dictionary.</li>
</ul>
<hr />
</section>
<section id="additional-resources" class="level2">
<h2>Additional Resources</h2>
<ul>
<li>Here's an example of a <a href="https://wptavern.com/ryan-hellyers-aws-nightmare-leaked-access-keys-result-in-a-6000-bill-overnight">stolen key horror story</a>.</li>
<li>The <a href="http://www.programmableweb.com/apis/directory">Programmable Web API Directory</a>.</li>
<li><a href="https://python.readthedocs.io/en/stable/library/xml.etree.elementtree.html">Element Tree XML</a></li>
</ul>
</section>

<footer><span class='slide-number'></span></footer>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,
    slideNumber: true,

  // available themes are in /css/theme
      theme: Reveal.getQueryHash().theme || 'default',

  // default/cube/page/concave/zoom/linear/fade/none
      transition: Reveal.getQueryHash().transition || 'slide',

  // Optional libraries used to extend on reveal.js
  dependencies: [
    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
    { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/prism/prism.js', async: true, callback: function() { /*hljs.initHighlightingOnLoad();*/ } },
    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
    // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
  });

  Reveal.addEventListener('ready', function() {
    if (Reveal.getIndices().h !== 0) {
      document.getElementById('theme').setAttribute('href', 'css/theme/ga.css');
    }
  });

  Reveal.addEventListener('slidechanged', function(e) {
    console.log('changed');
    if (Reveal.getIndices().h !== 0) {
      document.getElementById('theme').setAttribute('href', 'css/theme/ga.css');
    } else {
      document.getElementById('theme').setAttribute('href', 'css/theme/ga-title.css');
    }
  });

</script>

</body>
</html>
